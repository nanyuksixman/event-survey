<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í–‰ìš´ê¶Œ ì¶”ì²¨ ì¤‘...</title>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; text-align: center; padding-top: 50px; background-color: #f9f9f9; }
        h2 { color: #333; margin-bottom: 30px; }
        #status { font-size: 18px; color: #555; min-height: 60px; line-height: 1.6; }
        .code-box { 
            background: white; padding: 20px 40px; font-size: 28px; 
            font-weight: bold; color: #d32f2f; margin: 30px auto; 
            width: fit-content; border: 3px dashed #d32f2f; border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: none; /* í‰ì†Œì—” ìˆ¨ê¹€ */
        }
        .loader { font-size: 40px; margin-bottom: 20px; animation: spin 1s infinite linear; display: inline-block;}
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script type="text/javascript">
        (function() {
            // íšŒì›ë‹˜ì˜ Public Keyê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
            emailjs.init("1eClXvyi7Cegunx5J"); 
        })();
    </script>
</head>
<body>
    <h2>ğŸ í–‰ìš´ê¶Œ ì¶”ì²¨ ê²°ê³¼</h2>
    
    <div id="loading">
        <div class="loader">ğŸ”®</div>
        <div>í–‰ìš´ì„ í™•ì¸í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
    </div>

    <div id="status" style="display:none;"></div>
    
    <div id="winCode" class="code-box"></div>

    <script>
        // ============================================================
        // [í…ŒìŠ¤íŠ¸ íŒ] ì§€ê¸ˆì€ 30ë¶„ì˜ 1(ì•½ 3.3%) í™•ë¥ ì…ë‹ˆë‹¤.
        // í…ŒìŠ¤íŠ¸í•  ë•Œ ë¬´ì¡°ê±´ ë‹¹ì²¨ë˜ê²Œ í•˜ë ¤ë©´ ì•„ë˜ ìˆ«ìë¥¼ 1 ë¡œ ë°”ê¾¸ì„¸ìš”.
        var winRate = 1 / 1; 
        // ============================================================

        function generateCode() {
            // ì˜ë¬¸+ìˆ«ì 6ìë¦¬ ëœë¤ ìƒì„±
            return Math.random().toString(36).substr(2, 6).toUpperCase();
        }

        function sendEmail(code) {
            var templateParams = {
                message: code 
            };
            
            // íšŒì›ë‹˜ì˜ Service ID, Template IDê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
            emailjs.send('service_yzbru09', 'template_xwa54c9', templateParams)
                .then(function(response) {
                    console.log('ë©”ì¼ ì „ì†¡ ì„±ê³µ! (ê´€ë¦¬ìì—ê²Œ ë„ì°©)');
                }, function(error) {
                    console.log('ì „ì†¡ ì‹¤íŒ¨...', error);
                });
        }

        window.onload = function() {
            setTimeout(function() {
                var randomNum = Math.random();
                
                // ë¡œë”© ìˆ¨ê¸°ê³  ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
                document.getElementById('loading').style.display = 'none';
                document.getElementById('status').style.display = 'block';

                if (randomNum < winRate) {
                    // [ğŸ‰ ë‹¹ì²¨ ìƒí™©]
                    var myCode = generateCode();
                    
                    // 1. ì´ë©”ì¼ ë°œì†¡ (ëª°ë˜ ë³´ëƒ„)
                    sendEmail(myCode); 
                    
                    // 2. í™”ë©´ì— í‘œì‹œ
                    document.getElementById('status').innerHTML = 
                        "<b>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! í–‰ìš´ê¶Œì— ë‹¹ì²¨ë˜ì…¨ìŠµë‹ˆë‹¤!</b><br><br>" +
                        "ì•„ë˜ <span style='color:red'>ê²€ì¦ ì½”ë“œ</span>ë¥¼ ìº¡ì²˜í•´ì„œ<br>" +
                        "ë‹´ë‹¹ìì—ê²Œ ì§€ê¸ˆ ë°”ë¡œ ë³´ë‚´ì£¼ì„¸ìš”!";
                    
                    var codeBox = document.getElementById('winCode');
                    codeBox.innerText = myCode;
                    codeBox.style.display = 'block';

                } else {
                    // [ğŸ˜­ ê½ ìƒí™©]
                    document.getElementById('status').innerHTML = 
                        "ì•„ì‰½ê²Œë„ ë‹¹ì²¨ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ğŸ™‡â€â™‚ï¸<br>" +
                        "ì°¸ì—¬í•´ ì£¼ì…”ì„œ ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬í•©ë‹ˆë‹¤.";
                }
            }, 2000); // 2ì´ˆ ë’¤ ê²°ê³¼ ê³µê°œ
        };
    </script>
</body>
</html>
